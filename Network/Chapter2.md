# 2.1 네트워크 프로토콜

### 네트워크 프로토콜이란?

- 네트워크를 통해 컴퓨터끼리 통신하기 위한 규칙(절차)을 네트워크 프로토콜이라고 합니다.
- 예시로는 한국인이 한국어를 써서 외국인에게 말을 했을 때, 외국인은 알아듣지 못 합니다. 대화를 하기 위해서는 서로 정한 규칙(영어)이 존재해야 소통을 할 수 있습니다.
- 쉽게 말해 네트워크 프로토콜은 컴퓨터끼리 대화하기 위해 필요한 공통언어 입니다. <br><br>

# 2.2 OSI (Open System Interconnection) 참조 모델

### OSI 참조 모델이란?

- 네트워크에서는 데이터를 서로 다른 기종끼리도 송신할 수 있도록 상호 호환성을 구현하는 것이 중요한데, 이런 상호 호환성과 확장성을 제공하기 위해서 7개의 층으로 나뉘어져 관리되는 구조를 OSI 참조 모델 또는 OSI 계층 구조라고 합니다.
- OSI는 상하구조 체계를 띄고 있기 때문에 윗 계층이 동작하기 위해서는 아래 계층들이 정상적으로 동작하고 있어야 합니다.

### OSI 참조 모델의 구조

- 5~7 계층은 상위층이라고 하며, 1~4 계층은 하위층이라고 합니다. 상위층에 가까울 수록 사용자와 가깝습니다.
- 사용자와 사용자 사이에 데이터를 송수신하는 과정은 이 7개의 계층을 통해서 진행됩니다.
    - (송신자) → 7 → 6 → 5 → 4 → 3 → 2 → 1 → 2 → 3 → 4 → 5 → 6 → 7 → (수신자)

| 7계층 | 응용 계층 | 구체적으로 어떤 서비스를 제공할 것인가?
사용자와 직접 상호작용하는 인터페이스 역할을 진행합니다. 우리가 사용하는 웹 브라우저, 앱과 같은 프로그램들이 응용 계층에 속합니다.  |
| --- | --- | --- |
| 6계층 | 표현 계층 | 데이터를 어떤 형식으로 할 것인가?
전송받은 데이터를 다른 장치에서도 동일하게 표현될 수 있도록 번역하는 과정을 진행합니다. 내가 휴대폰으로 보낸 JPG 파일이 다른 장치에서도 동일하게 보여지는 이유가 표현 계층 덕분입니다.  |
| 5계층 | 세션 계층 | 통신의 시작과 끝을 어떻게 관리할 것인가?
통신의 시작점과 끝점이되는 통신 프로그램 사이의 연결을 관리하고, 통신 경로의 확립을 수행. |
| 4계층 | 전송 계층 | 통신의 신뢰성을 어떻게 확보할 것인가?
네트워크계층에서 보내온 데이터를 패킷 순서대로 정렬하고 누락된 패킷에 대해서는 재송신을 함으로써 송수신되는 데이터의 신뢰성을 확보합니다. |
| 3계층 | 네트워크 계층 | 네트워크와 네트워크를 어떻게 중개할 것인가?
상대방에게 데이터를 전송하기 위한 경로를 선택하고, 네트워크상에서 개개인을 식별하기 위한 주소 관리 일을 수행합니다. 여기서는 어느 노드들을 거쳐서 데이터를 전달해달라고 안 하고, 목적지의 IP 주소만을 주어 통신을 요구합니다. |
| 2계층 | 데이터 링크 계층 | 같은 네트워크 내에서 어떻게 통신할 것인가?
직접 연결된 서로 다른 2개의 네트워크 장치간 데이터 전송을 담당합니다. 데이터가 전송될 때, 바로 목적지 IP로 이동하는 것이 아닌 중간 이웃 노드들을 거쳐서 데이터가 이동됩니다. |
| 1계층 | 물리 계층 | 네트워크를 물리적으로 어떻게 연결할 것인가? 
케이블(하드웨어)과 같은 연결장치를 사용하여 송출 데이터를 전기적으로 교환을 실시하는 단계입니다.  |
<br><br>

# 2.3 TCP/IP

### TCP/IP란?

- 인터넷에서 표준으로 사용되고 있는 네트워크 프로토콜입니다.
- OSI 참조 모델에서 4계층(전송 계층)에 위치하는 **TCP**(상위 계층)와 3계층(네트워크 계층)에 위치하는 **IP**(하위 계층)를 조합하여 구성됩니다.
- IP와 TCP에 대한 설명은 뒤에서 하겠습니다.
<br><br>

# 2.4 IP (Internet Protocol)

### IP란?

- OSI 참조 모델의 3계층인 네트워크 계층에서 사용되는 네트워크 프로토콜입니다.

### IP의 역할

- 네트워크 상에서 **기기의 주소를 할당**하고, 해당 주소로 **패킷을 전송**하는 역할을 수행합니다.
- 쉽게 말해 기기의 주소를 정하고 그 주소까지 데이터를 보내기 위한 프로토콜입니다.
- 상위 계층인 TCP 또는 UDP에서 데이터 패킷을 수신하여 **IP 헤더**라는 정보를 추가하여 네트워크에 전송합니다.
    - IP 헤더는 패킷에 붙는 꼬리표같은 것을 말하며, 이 꼬리표 내부에는 송신지와 수신지의 IP주소를 비롯한 정보가 모여있어서 이 꼬리표를 바탕으로 올바른 목적지로 데이터가 전송됩니다.

<aside>
🙄 IP에는 **경로를 선택하는 방법**도 정의가 되어있어서 이를 통해서 여러 개의 네트워크를 넘나드는 통신이 가능합니다.

</aside>
<br><br>

# 2.5 TCP (Transmission Control Protocol)

### TCP란?

- OSI 참조 모델의 4계층인 전송 계층에서 사용되는 네트워크 프로토콜입니다.
- 데이터의 손실이 없으며 확실하게 상대에게 전송하는 것을 보장합니다. (신뢰성 보장)

### TCP의 역할

- 5계층(세션 계층) 이상의 프로토콜에서 통신 데이터를 수신하여 **패킷으로 분할**하고**,** 3계층인 IP에 전달해서 상대방에게 송신합니다.
- 패킷을 분할하고 전달할 때 패킷의 순서가 뒤바뀔 우려가 있기 때문에 신뢰성을 지키지 위한 몇 가지 방법을 이용합니다.
    - 통신 데이터를 패킷으로 분할할 때 **시퀀스 번호를 부여**합니다.
    - 수신 측에서 이 번호를 가지고 확인하고, 필요에 따라서 **순서를 정렬**합니다.
    - 또한 수신 측은 수신했다는 것을 알리는 패킷을 송신 측에게 전송합니다.
    - 일정 시간이 지나도 수신 측에서 대답이 없는 경우에는 **패킷을 다시 전송**해서 손실을 방지합니다.

<aside>
🙄 현재는 TCP와 IP를 조합한 **TCP/IP**가 주로 사용되고, 인터넷에서 각종 서비스의 기반으로 활용이 되고 있습니다.

그래서 TCP의 경우에는 신뢰성은 보장하지만 **무거운 프로토콜**이라 속도가 느리다는 단점이 있습니다.

</aside><br><br>

# 2.6 UDP (User Datagram Protocol)

### UDP란?

- OSI 참조 모델의 4계층(전송 계층)에서 사용하는 네트워크 프로토콜로서 위에서 말한 TCP와 같은 계층에 존재하는 프로토콜입니다.
- UDP에서 D는 **Datagram**을 의미하는데, 이는 연결이 없는 통신을 말하며 상대방에게 통지하지 않고 데이터를 보내는 전송 방법을 의미합니다.


### UDP의 역할

- 5계층 이상의 상위 계층에서 데이터를 수신하여 패킷으로 분할하고, IP를 통해서 전송합니다. 여기서 TCP와는 다르게 데이터 수신에 대한 확인은 하지 않습니다.
- 재전송, 패킷의 손실, 수신 확인 등을 하지 않기 때문에 UDP는 전송하는 기능을 상위 계층에서 직접 제어하기 위한 프로토콜로 사용됩니다.

<aside>
🙄 UDP는 신뢰성이 낮지만, **속도가 빠르다**는 장점이 있기 때문에 **실시간으로 재생**해야하는 음성 전화나 동영상 배포와 같은 곳에 많이 사용됩니다.

</aside><br><br>

# 2.7 패킷 (Packet)

### 패킷이란?

- 컴퓨터 통신에서 작게 분할된 통신 데이터의 단위를 말합니다.
- 배송되는 소포(packet)라는 의미로서 패킷이라고 불립니다.

### 패킷의 꼬리표

- 패킷에는 송신지와 수신지의 주소와 같은 속성 정보가 포함되어 있습니다.
- 패킷에 붙은 꼬리표를 바탕으로 네트워크를 통해 패킷이 올바른 목적지에 운반됩니다.
- 그리고 패킷에는 사용하는 네트워크 프로토콜에 대한 정보도 포함되어 있습니다.
    - 동일한 네트워크 내부에서 여러개의 네트워크 프로토콜이 섞이지 않고 사용될 수 있는 이유입니다.

<aside>
🙄 쉬운 예시로서 **고객(응용프로그램)**이 보내는 **짐(통신 데이터)**을 작은 **소포(패킷)**로 분할하고 분실되지 않도록 소포에 꼬리표를 붙여놓습니다. 꼬리표에는 소포의 **배송을 담당하는 업체(네트워크 프로토콜)**가 지정한 것을 사용합니다.

</aside>

### 패킷이 필요한 이유

- 통신 경로에서 1초간 전송할 수 있는 데이터의 양은 네트워크 규격마다 정해져 있습니다. 이때 만약 패킷 단위로 통신 데이터를 분할하지 않으면, 데이터가 통신 회선을 점유하는 시간이 늘어나기 때문에 그 사이에 다른 컴퓨터는 전혀 통신을 하지 못하는 상황이 발생합니다.
- 이런 이유 때문에 데이터를 작은 패킷으로 나누어 전송해서 회선을 공유합니다.<br><br>

# 2.8 노드

### 노드란?

- 네트워크에 연결되어 있는 네트워크 기기나 네트워크의 연결 지점을 모두 노드라고 합니다.
- 컴퓨터, 허브, 라우터 모두 노드입니다.
- “노드 간에 패킷을 송수신한다.”라고 하면 네트워크에 연결된 장비 간에 패킷을 주고 받는다는 의미로 생각할 수 있습니다.

<aside>
🙄 만약 네트워크에 10개의 기기가 연결되어 있다면, **10노드**라고 표현하기도 합니다.

</aside><br><br>

# 2.9 IP 주소

### IP 주소란?

- 네트워크에서 각 컴퓨터 한 대마다 할당된 식별 번호가 IP 주소입니다.
    - 인터넷에 연결된 장치를 식별하기 위해 사용되는 숫자로 구성된 주소입니다.
- 현재는 32비트로 표현하는 IPv4(Internet Protocol Version 4)을 사용합니다.
    - 하지만 32비트로 표현하면 숫자 그대로 이해하기 어렵기 때문에 8비트씩 4개로 나눠서 각각 10진수로 바꾼 표기방법을 사용합니다.
    - 11000000.10101000.00000000.00000010 → 192.168.0.2
- IP 주소는 네트워크를 식별하기 위한 **네트워크 주소**와 컴퓨터를 식별하기 위한 **호스트 주소**로 나뉩니다.
- IP 주소는 위에서 배운 패킷의 꼬리표에 저장됩니다.
    - 통신 데이터를 보내는 사람의 IP 주소
    - 통신 데이터를 받는 사람의 IP 주소

### IP의 종류

1. **공인 IP**
- 인터넷 업체가 사용자에게 할당하고, 공유기가 인터넷과 통신할 수 있도록 해주는 외부 IP 주소.
- 인터넷 통신을 목적으로 사용합니다.
- 인터넷에서 식별할 수 있도록 다른 IP와 중복되지 않습니다.
    - 본인의 공인 IP와 같은 공인 IP를 가진 사람은 없습니다.
1. **사설 IP**
- 공유기가 노트북, 스마트폰, 휴대폰 등 홈 네트워크에 연결된 장치에 할당하는 내부 IP 주소.
- 로컬 네트워크 통신을 목적으로 사용합니다.
- 너트워크 관리자 또는 장치(공유기)가 할당합니다.
- 인터넷에서는 식별을 하지 못합니다.
- 로컬 네트워크에서 할당하기 때문에 다른 네트워크의 IP와 중복될 수 있습니다.
    - 즉, A라는 사람과 B라는 사람은 공인 IP는 절대 같을 수 없지만, 사설 IP는 같을 수 있습니다.

<aside>
🙄 하지만 점점 네트워크의 사용자가 많아지게 되면서 32비트로 표현하는 IPv4의 수가 부족해질 수도 있다는 우려로 인해서 지금은 IPv4를 사용하면서 128비트의 수로 표현하는 **IPv6**로의 이전이 진행되고 있습니다.

</aside>

<aside>
❓ 본인의 IP 주소를 노출시키면 안된다고 알고 있는 사람이 많은데, 이때 말하는 IP가 바로 **공인 IP**입니다. 인터넷에서 본인을 식별할 수 있는 IP이기 때문에

</aside><br><br>

# 2.10 서브넷 마스크 (Subnet mask)

### 서브넷이란?

- 그래서 원래는 하나의 네트워크이지만 이 하나의 네트워크를 논리적으로 여러 네트워크로 분할한 것을 **서브넷**이라고 합니다.

### 서브넷 마스크란?

- 서브넷을 표현하는데 사용되는 값을 말합니다.
- IP 주소의 앞에서부터 몇 비트까지 네트워크 주소로 사용할지 재정의하기 위해서 사용됩니다.

### 서브넷 마스크의 적용

- 172.16.0.0 ~ 172.16.255.255 범위의 IP 주소를 사용하는 네트워크가 있다고 가정하겠습니다.
    - 여기서 172.16에 해당하는 16비트에 해당하는 주소가 네트워크 주소 부분에 해당합니다.
    - 서브넷 마스크를 사용해서 앞에서부터 24비트까지를 네트워크 주소로 재정의합니다.
    - 이때 부터 172.16이라는 네트워크 내부에 172.16.0 ~ 172.16.255 주소로 256개의 서브넷으로 나뉘어집니다.
        - 여기서 172.16은 **네트워크 주소** 부분이고, 0~255는 **서브넷** 부분, 마지막 0~255는 **호스트 주소** 부분을 나타냅니다.

### 서브넷을 사용하는 이유

- 한 네트워크에 많은 호스트가 있을 경우 원활한 통신이 불가능하기 때문입니다. 네트워크를 적절하게 나눠서 사용합니다. (IP 주소가 부족해지고 있기 때문에 서버관리 시 반드시 필요)
- 네트워크는 클래스로 나뉘어져 있습니다.
    
    
    | A 클래스 | 11111111.00000000.00000000.00000000 | 255.0.0.0 |
    | --- | --- | --- |
    | B 클래스 | 11111111.11111111.00000000.00000000 | 255.255.0.0 |
    | C 클래스 | 11111111.11111111.11111111.00000000 | 255.255.255.0 |
- A 클래스의 네트워크의 경우 하나의 네트워크에 16,777,214개의 호스트 IP를 할당할 수 있습니다. 만약 이 A 클래스의 네트워크를 가정집에 부여하게 된다면 어떻게 될까요?
    - 가정집에서 많아봤자 5~10개의 기기가 사설 IP를 부여 받습니다. 하지만 그럼 나머지 16,777,204개의 호스트 IP는 안 쓰고 버리는 거나 마찬가지이기 때문에 비효율적입니다.
- 서브넷팅을 사용하면 호스트가 32명인 하나의 작은 네트워크로 만들 수 있습니다.

<aside>
❓ **Q. 같은 네트워크 였다가 서브넷 마스크를 사용해서 서브넷으로 나누면 다른 네트워크가 되는가? (서브넷 적용 예시)**
예시로 150.100.0.0 이라는 네트워크에서는 네트워크 주소가 150.100 입니다. 즉, 다시말해 **150.100**.100.1과 **150.100**.200.1은 같은 네트워크에 있기 때문에 라우터 없이 네트워크 통신을 할 수 있습니다.  위와 같은 경우를 **255.255**.0.0(B클래스)의 서브넷 마스크를 사용했다고할 수 있습니다. 

만약 동일한 네트워크에서 **255.255.255**.0(C클래스)의 서브넷 마스크를 사용한다고 하면 **150.100.100**.1과 **150.100.200**.1은 더이상 같은 네트워크가 될 수 없습니다. 즉, 이제 통신을 하기 위해서는 라우터가 반드시 필요하다는 이야기 입니다. 

왜냐하면 서브넷 마스크를 이용해서 서브넷을 나눴기 때문에 전자의 경우에는 네트워크가 **150.100.100**인 것이고, 후자의 경우 네트워크가 **150.100.200**이 된 것입니다. **서로 다른 네트워크**가 될 수 있다고 합니다.

</aside>

<aside>
❓ **Q. 게이트 웨이와 서브넷 마스크의 관련성?**
네트워크와 네트워크를 연결시켜주는 라우터(공유기)는 공인 IP와 사설 IP를 모두 갖습니다. 이때 라우터의 사설 IP(Private IP)를 **게이트 웨이 주소**라고 합니다. 

다른 네트워크끼리 데이터 통신을 할 때는 라우터와 라우터 사이의 데이터 전송이 이루어지기 때문에 라우터의 **공인 IP**를 사용합니다. 

같은 네트워크 안에 있는 사용자들은 라우터의 **사설 IP**인 **게이트 웨이 주소**를 나누어서 가져가는데 이때 사용자 수에 맞게 알맞는 효율적인 네트워크 환경을 만들기 위해 사용하는 것이 **서브넷 마스크**입니다. 

한 건물에 만약 150명의 사람이 살고 있고, 건물 전용 라우터가 1개일 때는 **C클래스의 서브넷 마스크(255.255.255.000)**를 사용해서 라우터의 게이트 웨이 주소(사설 IP)를 나눠 사용하면 됩니다.

</aside><br><br>


# 2.11 포트 번호

### 포트 번호란?

- 위에서 언급했던 TCP/IP는 IP 주소를 기반으로 데이터 통신이 이루어집니다.
- 하지만, IP 주소에서는 보내고자 하는 컴퓨터가 “네트워크의 어느 곳에 위치하는 컴퓨터인지”까지만 알 수 있을 뿐 “그 컴퓨터의 어느 프로그램으로 전달하는 패킷인가?”까지는 알 수가 없습니다.
- 어느 프로그램으로 전달되는지 알기 위해서 사용하는 것이 **포트 번호**입니다. 쉽게 말해서 접속 장소라고 생각하면 됩니다.
- 포트 번호는 0부터 65,535의 숫자까지 적용이 가능하고, 실제로 TCP/IP에 프로그램마다 기본 포트 번호가 지정되어 있습니다. 즉, 통신을 할 때 포트 번호까지 지정하는 경우는 없습니다.
    - 예를 들어 톰캣 서버는 8080, 오라클은 1521, MySQL은 3306의 포트 번호를 기본적으로 가지고 있습니다.

<aside>
💡 윈도우에서는 >>netstat -a 명령어로 사용하고 있는 포트번호를 확인할 수 있습니다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/02e3b7c9-7a55-47fc-acf4-b1d88a6f6661/Untitled.png)

</aside>

<aside>
❓ **Q. 응용프로그램에 지정된 포트번호가 있다고 했는데, 만약 그 포트 번호를 이미 다른 프로그램으로 사용하고 있다면 어떻게 되나?**
예시로 React로 작업을 하고 로컬 호스트의 3000포트에서 열리는 것으로 기본 설정이 되어 있습니다. 하지만 만약 다른 응용프로그램에서 3000포트를 사용하고 있다면, 3001포트에서 열린다고 합니다. 

오라클의 경우도 default 포트로 1521번이 설정되어 있지만, 보안상의 이유로 여러 회사에서는 다른 포트로 바꿔 사용하는 곳도 많다고 합니다. 즉, 로컬에서 만약 1521을 쓰고 있더라도 사용 가능한 포트중 하나로 바꿔서 사용할 수 있습니다. 

사용할 수있는 포트 번호는 0~65,535까지이고, 0~1024까지는 통신을 위한 규약에 따라서 이미 정해져 있다고 합니다. 그 중 잘 알려진 것은 SSH는 22번 포트, HTTP는 80번 포트, HTTPS는 443번 포트를 이용하도록 정해져 있다고 합니다.

</aside><br><br>

# 2.12 도메인

### 도메인이란?

- 위에서 말했던 IP 주소는 49.236.150.128 처럼 기억하기 어려운 주소로 되어있습니다.
- 만약 우리가 자주 사용하는 Google, Naver와 같이 자주 접속을 해야된다면 기억에 남는 이름으로 주소를 지정해야 합니다.
- 이때 사용되는 것이 도메인 주소입니다.

### 도메인 주소의 구조

- 도메인 주소는 보통 오른쪽부터 넓은 범위의 소속을 나타냅니다.
- 예를 들어 www.google.co.kr을 살펴봅시다.
    - “kr” : 한국이라는 **나라**를 의미합니다.
    - “co” : **조직의 종류**를 의미합니다.
    - “google” : **조직의 이름**을 의미합니다.
    - “www” : **컴퓨터 명**을 의미합니다.
- 즉 위 도메인은 한국에 있는 기업을 뜻하고, Google이라는 이름을 가지는 조직에 존재하는 www라는 이름의 컴퓨터를 말합니다.

<aside>
❓ **Q. 도메인에서 “.com”은 무엇을 의미하는가?**
company를 의미하며 회사용으로 만든 도메인이라고 합니다. (😅 단순;;) 

추가적인 도메인에 대한 상식입니다.
1. 도메인은 2단계 구성과 3단계 구성이 있다?

(1) 2단계 구성 도메인
**.com** : company를 의미 회사용으로 사용하기 위한 도메인
**.net** : 네트워크 관련 사이트용이지만 .com과 마찬가지로 법인/개인도 만들 수 있습니다.
**.org** : 기타분류로 생성된 도메인
**.biz** : 비즈니스의 약어입니다.

(2) 3단계 구성 도메인
**co.kr** : 한국의 영리 회사
**ne.kr** : 네트워크 사업자
**or.kr** : 비영리 기관
**go.kr** : 정부기관만 사용이 가능합니다. 개인/법인 사용 불가
**ac.kr** : 대학교 대학원만 사용가능
**hs.kr** : 고등학교
**ms.kr** : 중학교
**es.kr** : 초등학교

</aside><br><br>

# 2.13 IPv6 (Internet Protocol version 6)

### IPv6란?

- TCP/IP 네트워크에서 사용되고 있는 3계층(네트워크 계층)의 프로토콜인 IP의 차세대 규격에 해당합니다.
- 쉽게 말해 앞서 말했던 IPv4의 경우 32비트의 숫자로 표현을 하지만, 컴퓨터의 사용자가 많아지고 있기에 언젠가는 32비트의 숫자로 IP를 표시하기에 부족해질 수 있습니다.
- 이를 대비해서 지금은 128비트의 숫자로 표현하는 IPv6로 이전을 하고 있는 중입니다.
    - 하지만 IPv6와 IPv4는 상호 호환에 대한 문제가 있기 때문에 갑자기 모든 IP를 IPv6로 바꾸는 것은 문제가 발생할 수 있습니다.
    - 상호 공존할 수 있는 시스템을 개발 중에 있다고 합니다.

<aside>
🙄 32비트의 숫자도 43억개 정도의 숫자를 표현할 수 있지만, 이제는 컴퓨터 뿐만 아니라 **가전제품 등에도 IP 주소를 할당**하여 연결하는 시대가 왔기 때문에 43억이라는 수는 결코 많은 수가 아닙니다.

IPv6에 해당하는 128비트는 **약 1조 * 1조**를 한 개수만큼 숫자 표현이 가능하여 거의 무한대에 가까운 숫자라고 해도 과언이 아닙니다.

</aside>

<aside>
❓ IPv6는 IPv4와 다르게 **암호화**와 **인증 기능**을 제공한다고 합니다.

</aside>